{% doc %}
  @prompt
    A social media block toggle most popular social media platform with URL etc, can we allowed the user to change the order?, can we let the user chose the icon style?
    And I want to be able to chose for the block to be fill or fir layout, you are missing the icons style with no circle, icon ONLY still have a round around it, you broke everything. revert

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-social-media-{{ ai_gen_id }} {
    display: flex;
    flex-wrap: wrap;
    gap: {{ block.settings.spacing }}px;
    justify-content: {{ block.settings.alignment }};
    padding: {{ block.settings.padding }}px;
    {% if block.settings.layout == 'fill' %}
      width: 100%;
    {% else %}
      width: fit-content;
      margin: 0 auto;
    {% endif %}
  }

  {% if block.settings.layout == 'fill' %}
    .ai-social-media__link-{{ ai_gen_id }} {
      flex: 1;
      min-width: 0;
    }
  {% endif %}

  .ai-social-media__link-{{ ai_gen_id }} {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    transition: all 0.3s ease;
    position: relative;
    
    {% if block.settings.icon_style == 'icon_only' %}
      width: auto;
      height: auto;
      background-color: transparent;
      color: {{ block.settings.icon_color }};
      border: none;
      border-radius: 0;
    {% else %}
      width: {{ block.settings.icon_size }}px;
      height: {{ block.settings.icon_size }}px;
      {% case block.settings.icon_style %}
        {% when 'filled' %}
          background-color: {{ block.settings.background_color }};
          color: {{ block.settings.icon_color }};
          border: {{ block.settings.border_width }}px solid {{ block.settings.border_color }};
          border-radius: {{ block.settings.border_radius }}px;
        {% when 'outlined' %}
          background-color: transparent;
          color: {{ block.settings.icon_color }};
          border: {{ block.settings.border_width }}px solid {{ block.settings.border_color }};
          border-radius: {{ block.settings.border_radius }}px;
        {% when 'minimal' %}
          background-color: transparent;
          color: {{ block.settings.icon_color }};
          border: none;
          border-radius: 0;
        {% when 'gradient' %}
          background: linear-gradient(135deg, {{ block.settings.background_color }}, {{ block.settings.gradient_color }});
          color: {{ block.settings.icon_color }};
          border: {{ block.settings.border_width }}px solid {{ block.settings.border_color }};
          border-radius: {{ block.settings.border_radius }}px;
        {% when 'shadow' %}
          background-color: {{ block.settings.background_color }};
          color: {{ block.settings.icon_color }};
          border: {{ block.settings.border_width }}px solid {{ block.settings.border_color }};
          border-radius: {{ block.settings.border_radius }}px;box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      {% endcase %}
    {% endif %}}

  .ai-social-media__link-{{ ai_gen_id }}:hover {
    {% if block.settings.icon_style == 'icon_only' %}
      color: {{ block.settings.hover_icon_color }};
      transform: scale(1.2);
    {% else %}
      {% case block.settings.icon_style %}
        {% when 'filled' %}
          background-color: {{ block.settings.hover_background_color }};
          color: {{ block.settings.hover_icon_color }};
          border-color: {{ block.settings.hover_border_color }};
          transform: translateY(-2px);
        {% when 'outlined' %}
          background-color: {{ block.settings.hover_background_color }};
          color: {{ block.settings.hover_icon_color }};
          border-color: {{ block.settings.hover_border_color }};
          transform: translateY(-2px);
        {% when 'minimal' %}
          color: {{ block.settings.hover_icon_color }};
          transform: scale(1.1);
        {% when 'gradient' %}
          background: linear-gradient(135deg, {{ block.settings.hover_background_color }}, {{ block.settings.hover_gradient_color }});
          color: {{ block.settings.hover_icon_color }};
          border-color: {{ block.settings.hover_border_color }};
          transform: translateY(-2px);
        {% when 'shadow' %}
          background-color: {{ block.settings.hover_background_color }};
          color: {{ block.settings.hover_icon_color }};
          border-color: {{ block.settings.hover_border_color }};
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
          transform: translateY(-4px);
      {% endcase %}
    {% endif %}
  }

  .ai-social-media__icon-{{ ai_gen_id }} {
    {% if block.settings.icon_style == 'icon_only' %}
      width: {{ block.settings.icon_size }}px;
      height: {{ block.settings.icon_size }}px;{% else %}
      width: calc({{ block.settings.icon_size }}px * 0.6);
      height: calc({{ block.settings.icon_size }}px * 0.6);
    {% endif %}
    fill: currentColor;
  }

  @media screen and (max-width: 749px) {
    .ai-social-media-{{ ai_gen_id }} {
      justify-content: center;}
    
    .ai-social-media__link-{{ ai_gen_id }} {
      {% if block.settings.icon_style != 'icon_only' %}
        width: {{ block.settings.icon_size | times: 0.9 }}px;
        height: {{ block.settings.icon_size | times: 0.9 }}px;
      {% endif %}
    }

    .ai-social-media__icon-{{ ai_gen_id }} {
      {% if block.settings.icon_style == 'icon_only' %}
        width: {{ block.settings.icon_size | times: 0.9 }}px;
        height: {{ block.settings.icon_size | times: 0.9 }}px;
      {% endif %}
    }
  }
{% endstyle %}

{% liquid
  assign social_platforms = 'facebook,instagram,twitter,youtube,linkedin,tiktok,pinterest,snapchat' | split: ','
  assign ordered_platforms = block.settings.platform_order | split: ','
  assign social_links = ''
  
  for platform in ordered_platforms
    assign platform = platform | strip
    if social_platforms contains platform
      assign show_key = 'show_' | append: platform
      assign url_key = platform | append: '_url'
      assign show_platform = block.settings[show_key]
      assign platform_url = block.settings[url_key]
      
      if show_platform and platform_url != blank
        assign social_links = social_links | append: platform | append: ','
      endif
    endif
  endfor
  
  assign social_links = social_links | remove_last: ','
  assign social_links_array = social_links | split: ','
%}

<div class="ai-social-media-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {% for platform in social_links_array %}
    {% assign platform = platform | strip %}
    {% assign url_key = platform | append: '_url' %}
    {% assign platform_url = block.settings[url_key] %}
    
    {% case platform %}
      {% when 'facebook' %}
        <a 
          href="{{ platform_url }}" 
          class="ai-social-media__link-{{ ai_gen_id }}"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Follow us on Facebook"
        >
          <svg class="ai-social-media__icon-{{ ai_gen_id }}" viewBox="0 0 24 24">
            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
          </svg>
        </a>
        
      {% when 'instagram' %}
        <a 
          href="{{ platform_url }}" 
          class="ai-social-media__link-{{ ai_gen_id }}"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Follow us on Instagram"
        >
          <svg class="ai-social-media__icon-{{ ai_gen_id }}" viewBox="0 0 24 24">
            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
        </a>
        
      {% when 'twitter' %}
        <a 
          href="{{ platform_url }}" 
          class="ai-social-media__link-{{ ai_gen_id }}"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Follow us on Twitter"
        >
          <svg class="ai-social-media__icon-{{ ai_gen_id }}" viewBox="0 0 24 24">
            <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
        </a>
        
      {% when 'youtube' %}
        <a 
          href="{{ platform_url }}" 
          class="ai-social-media__link-{{ ai_gen_id }}"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Follow us on YouTube"
        >
          <svg class="ai-social-media__icon-{{ ai_gen_id }}" viewBox="0 0 24 24">
            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
        </a>
        
      {% when 'linkedin' %}
        <a 
          href="{{ platform_url }}" 
          class="ai-social-media__link-{{ ai_gen_id }}"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Follow us on LinkedIn"
        >
          <svg class="ai-social-media__icon-{{ ai_gen_id }}" viewBox="0 0 24 24">
            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
        </a>
        
      {% when 'tiktok' %}
        <a 
          href="{{ platform_url }}" 
          class="ai-social-media__link-{{ ai_gen_id }}"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Follow us on TikTok"
        >
          <svg class="ai-social-media__icon-{{ ai_gen_id }}" viewBox="0 0 24 24">
            <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.081.53.63 3.09 1.75 4.171.121.112.71.62 4.241.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.012.92.01 5.84-.02 8.75-.081.4-.542.79-1.35 3.94-1.311.92-3.583.17-5.913.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.021.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.111.04-1.361.75-.21.51-.15 1.07-.14 1.61.241.641.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
          </svg>
        </a>
        
      {% when 'pinterest' %}
        <a 
          href="{{ platform_url }}" 
          class="ai-social-media__link-{{ ai_gen_id }}"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Follow us on Pinterest"
        >
          <svg class="ai-social-media__icon-{{ ai_gen_id }}" viewBox="0 0 24 24">
            <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.748-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24c6.624 0 11.99-5.367 11.99-11.987C24.007 5.367 18.641.001 12.017.001z"/>
          </svg>
        </a>
        
      {% when 'snapchat' %}
        <a 
          href="{{ platform_url }}" 
          class="ai-social-media__link-{{ ai_gen_id }}"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Follow us on Snapchat"
        >
          <svg class="ai-social-media__icon-{{ ai_gen_id }}" viewBox="0 0 24 24">
            <path d="M12 0C5.374 0 0 5.373 0 12s5.374 12 12 12 12-5.373 12-12S18.626 0 12 0zm5.568 8.16c-.169 1.858-.896 3.433-2.043 4.585-.906.906-2.013 1.375-3.183 1.375-.359 0-.714-.049-1.062-.142-.297-.08-.581-.187-.848-.318-.089-.044-.176-.089-.263-.142-.297-.186-.575-.398-.831-.636-.256-.238-.489-.501-.696-.789-.103-.144-.198-.295-.287-.449-.089-.154-.171-.312-.246-.474-.149-.324-.269-.66-.358-1.006-.089-.346-.147-.7-.173-1.057-.013-.178-.019-.357-.019-.537 0-.537.077-1.066.229-1.573.152-.507.375-.99.663-1.437.144-.223.307-.433.487-.629.18-.196.378-.378.593-.544.43-.33.925-.588 1.456-.756.531-.168 1.094-.253 1.666-.253.572 0 1.135.085 1.666.253.531.168 1.026.426 1.456.756.215.166.413.348.593.544.18.196.343.406.487.629.288.447.511.93.663 1.437.152.507.229 1.036.229 1.573 0 .18-.006.359-.019.537-.026.357-.084.711-.173 1.057-.089.346-.209.682-.358 1.006-.075.162-.157.32-.246.474-.089.154-.184.305-.287.449-.207.288-.44.551-.696.789-.256.238-.534.45-.831.636-.087.053-.174.098-.263.142-.267.131-.551.238-.848.318-.348.093-.703.142-1.062.142-1.17 0-2.277-.469-3.183-1.375-1.147-1.152-1.874-2.727-2.043-4.585-.013-.142-.019-.285-.019-.428 0-.428.077-.848.229-1.246.152-.398.375-.777.663-1.127.144-.175.307-.34.487-.494.18-.154.378-.297.593-.427.43-.26.925-.462 1.456-.594.531-.132 1.094-.199 1.666-.199.572 0 1.135.067 1.666.199.531.132 1.026.334 1.456.594.215.13.413.273.593.427.18.154.343.319.487.494.288.35.511.729.663 1.127.152.398.229.818.229 1.246 0 .143-.006.286-.019.428z"/>
          </svg>
        </a>
    {% endcase %}
  {% endfor %}
</div>

{% schema %}
{
  "name": "Social media links",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout type",
      "options": [
        {
          "value": "fit",
          "label": "Fit content"
        },
        {
          "value": "fill",
          "label": "Fill width"
        }
      ],
      "default": "fit"
    },
    {
      "type": "select",
      "id": "alignment",
      "label": "Alignment",
      "options": [
        {
          "value": "flex-start",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "flex-end",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "spacing",
      "min": 5,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Spacing between icons",
      "default": 15
    },
    {
      "type": "range",
      "id": "padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Padding",
      "default": 20
    },
    {
      "type": "text",
      "id": "platform_order",
      "label": "Platform order",
      "default": "facebook, instagram, twitter, youtube, linkedin, tiktok, pinterest, snapchat",
      "info": "Enter platform names separated by commas to control the display order. Available platforms: facebook, instagram, twitter, youtube, linkedin, tiktok, pinterest, snapchat"
    },
    {
      "type": "header",
      "content": "Icon style"
    },
    {
      "type": "select",
      "id": "icon_style",
      "label": "Icon style",
      "options": [
        {
          "value": "filled",
          "label": "Filled circle"
        },
        {
          "value": "outlined",
          "label": "Outlined circle"
        },
        {
          "value": "minimal",
          "label": "Minimal circle"
        },
        {
          "value": "icon_only",
          "label": "Icon only"
        },
        {
          "value": "gradient",
          "label": "Gradient circle"
        },
        {
          "value": "shadow",
          "label": "Shadow circle"
        }
      ],
      "default": "filled"
    },
    {
      "type": "range",
      "id": "icon_size",
      "min": 20,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Icon size",
      "default": 45
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Border radius",
      "default": 25
    },
    {
      "type": "range",
      "id": "border_width",
      "min": 0,
      "max": 5,
      "step": 1,
      "unit": "px",
      "label": "Border width",
      "default": 0
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border color",
      "default": "#cccccc"
    },
    {
      "type": "color",
      "id": "gradient_color",
      "label": "Gradient end color",
      "default": "#333333",
      "info": "Used for gradient style"
    },
    {
      "type": "header",
      "content": "Hover colors"
    },
    {
      "type": "color",
      "id": "hover_background_color",
      "label": "Hover background color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "hover_icon_color",
      "label": "Hover icon color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "hover_border_color",
      "label": "Hover border color",
      "default": "#cccccc"
    },
    {
      "type": "color",
      "id": "hover_gradient_color",
      "label": "Hover gradient end color",
      "default": "#555555",
      "info": "Used for gradient style"
    },
    {
      "type": "header",
      "content": "Facebook"
    },
    {
      "type": "checkbox",
      "id": "show_facebook",
      "label": "Show Facebook",
      "default": true
    },
    {
      "type": "url",
      "id": "facebook_url",
      "label": "Facebook URL"
    },
    {
      "type": "header",
      "content": "Instagram"
    },
    {
      "type": "checkbox",
      "id": "show_instagram",
      "label": "Show Instagram",
      "default": true
    },
    {
      "type": "url",
      "id": "instagram_url",
      "label": "Instagram URL"
    },
    {
      "type": "header",
      "content": "Twitter"
    },
    {
      "type": "checkbox",
      "id": "show_twitter",
      "label": "Show Twitter",
      "default": true
    },
    {
      "type": "url",
      "id": "twitter_url",
      "label": "Twitter URL"
    },
    {
      "type": "header",
      "content": "YouTube"
    },
    {
      "type": "checkbox",
      "id": "show_youtube",
      "label": "Show YouTube",
      "default": true
    },
    {
      "type": "url",
      "id": "youtube_url",
      "label": "YouTube URL"
    },
    {
      "type": "header",
      "content": "LinkedIn"
    },
    {
      "type": "checkbox",
      "id": "show_linkedin",
      "label": "Show LinkedIn",
      "default": false
    },
    {
      "type": "url",
      "id": "linkedin_url",
      "label": "LinkedIn URL"
    },
    {
      "type": "header",
      "content": "TikTok"
    },
    {
      "type": "checkbox",
      "id": "show_tiktok",
      "label": "Show TikTok",
      "default": true
    },
    {
      "type": "url",
      "id": "tiktok_url",
      "label": "TikTok URL"
    },
    {
      "type": "header",
      "content": "Pinterest"
    },
    {
      "type": "checkbox",
      "id": "show_pinterest",
      "label": "Show Pinterest",
      "default": false
    },
    {
      "type": "url",
      "id": "pinterest_url",
      "label": "Pinterest URL"
    },
    {
      "type": "header",
      "content": "Snapchat"
    },
    {
      "type": "checkbox",
      "id": "show_snapchat",
      "label": "Show Snapchat",
      "default": false
    },
    {
      "type": "url",
      "id": "snapchat_url",
      "label": "Snapchat URL"
    }
  ],
  "presets": [
    {
      "name": "Social media links"
    }
  ]
}
{% endschema %}